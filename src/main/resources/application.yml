spring:
  application:
    name: notification
    version: @project.version@

  # ==============================================================
  # MAIL & KEYS
  # ==============================================================
  mail:
    host: ${MAIL_HOST}
    port: ${MAIL_PORT}
    username: ${MAIL_USERNAME}
    password: ${MAIL_PASSWORD}
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
  chave-de-acesso: teste-1234,gateway-api-key

  # ==============================================================
  # CORE CONFIGURATIONS (JPA, Jackson, Security, Flyway)
  # ==============================================================
  jackson:
    time-zone: America/Sao_Paulo
  jpa:
    enabled: true
    properties:
      hibernate:
        default_schema: gl_notification
        jdbc:
          time_zone: America/Sao_Paulo
  security:
    enabled: false
  flyway:
    locations: classpath:db/migration
    table: FLYWAY_SCHEMA_HISTORY
    schemas: gl_notification
    # Defaults for local/dev
    user: gl_notification
    password: gl_notification
    url: jdbc:postgresql://localhost:5432/glaiss?currentSchema=gl_notification&TimeZone=America/Sao_Paulo

  # ==============================================================
  # FEATURE FLAGS & INTEGRATIONS (Default: Standalone/Disabled)
  # ==============================================================
  cloud:
    discovery:
      enabled: ${DISCOVERY_ENABLED:false}
    loadbalancer:
      enabled: ${LOADBALANCER_ENABLED:false}
      ribbon:
        enabled: false
  
  redis:
    enabled: ${REDIS_ENABLED:false}

# ==============================================================
# EUREKA CLIENT CONFIGURATION
# ==============================================================
eureka:
  client:
    enabled: ${EUREKA_CLIENT_ENABLED:false}
    service-url:
      defaultZone: ${URL_DISCOVERY:http://localhost:8761/discovery/eureka}
    fetch-registry: true
    register-with-eureka: true
  instance:
    hostname: ${EUREKA_INSTANCE_HOSTNAME:localhost}
    prefer-ip-address: false
    non-secure-port: ${PORT:8194}
    instance-id: ${spring.application.name}:${server.port}

# ==============================================================
# SERVER & MANAGEMENT
# ==============================================================
server:
  port: ${PORT:8194}
  servlet:
    context-path: /notification

management:
  endpoints:
    web:
      exposure:
        include: "*"
  tracing:
    enabled: true
    exporter:
      zipkin:
        enabled: true
        url: http://localhost:9411/api/v2/spans

# ==============================================================
# LOGGING & LOGSTASH
# ==============================================================
logstash:
  destination: ${LOGSTASH_HOST:localhost}:${LOGSTASH_PORT:5000}

logging:
  level:
    root: WARN
    org.springframework: WARN
    org.springframework.web: WARN
    org.springframework.boot: WARN
    org.springframework.security: WARN
    org.hibernate: WARN
    org.hibernate.SQL: OFF
    com.glaiss: INFO

---
# ==============================================================
# PROFILE: DEV
# ==============================================================
spring:
  config:
    activate:
      on-profile: dev
  datasource:
    url: jdbc:postgresql://localhost:5432/glaiss?currentSchema=gl_notification&TimeZone=America/Sao_Paulo
    username: gl_notification_app
    password: gl_notification
    driver-class-name: org.postgresql.Driver

---
# ==============================================================
# PROFILE: PROD
# ==============================================================
spring:
  config:
    activate:
      on-profile: prod
  datasource:
    url: ${DB_URL}
    username: ${USER_DB}
    password: ${PASSWORD_DB}
    driver-class-name: org.postgresql.Driver
  flyway:
    user: ${USER_DB_FLYWAY}
    password: ${PASSWORD_DB_FLYWAY}
    url: ${DB_URL}
  
  mail:
    host: ${MAIL_HOST}
    port: ${MAIL_PORT}
    username: ${MAIL_USERNAME}
    password: ${MAIL_PASSWORD}
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true

  chave-de-acesso: ${CHAVES_DE_ACESSO}
